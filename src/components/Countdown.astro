---
// Countdown component for TECS registration deadline
export interface Props {
  className?: string;
}

const { className = "" } = Astro.props;
---

<div class={`countdown ${className}`}>
  <div class="container">
    <h2>Registration Closes In</h2>
    <div class="countdown-grid">
      <div class="countdown-item">
        <span class="countdown-number" id="days">00</span>
        <span class="countdown-label">Days</span>
      </div>
      <div class="countdown-item">
        <span class="countdown-number" id="hours">00</span>
        <span class="countdown-label">Hours</span>
      </div>
      <div class="countdown-item">
        <span class="countdown-number" id="minutes">00</span>
        <span class="countdown-label">Minutes</span>
      </div>
      <div class="countdown-item">
        <span class="countdown-number" id="seconds">00</span>
        <span class="countdown-label">Seconds</span>
      </div>
    </div>
    <p class="countdown-subtitle">Don't miss your chance to compete!</p>
  </div>
</div>

<script>
  function updateCountdown() {
    // Target date: October 23rd, 2025, 00:00 UTC+1 (October 22nd, 2025, 23:00 UTC)
    const targetDate = new Date('2025-10-22T23:00:00Z');
    const now = new Date();
    const difference = targetDate.getTime() - now.getTime();

    if (difference <= 0) {
      // Countdown has ended
      const daysEl = document.getElementById('days') as HTMLElement;
      const hoursEl = document.getElementById('hours') as HTMLElement;
      const minutesEl = document.getElementById('minutes') as HTMLElement;
      const secondsEl = document.getElementById('seconds') as HTMLElement;
      
      if (daysEl) daysEl.textContent = '00';
      if (hoursEl) hoursEl.textContent = '00';
      if (minutesEl) minutesEl.textContent = '00';
      if (secondsEl) secondsEl.textContent = '00';
      return;
    }

    const days = Math.floor(difference / (1000 * 60 * 60 * 24));
    const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((difference % (1000 * 60)) / 1000);

    const daysEl = document.getElementById('days') as HTMLElement;
    const hoursEl = document.getElementById('hours') as HTMLElement;
    const minutesEl = document.getElementById('minutes') as HTMLElement;
    const secondsEl = document.getElementById('seconds') as HTMLElement;

    if (daysEl) daysEl.textContent = days.toString().padStart(2, '0');
    if (hoursEl) hoursEl.textContent = hours.toString().padStart(2, '0');
    if (minutesEl) minutesEl.textContent = minutes.toString().padStart(2, '0');
    if (secondsEl) secondsEl.textContent = seconds.toString().padStart(2, '0');
  }

  // Update countdown every second
  updateCountdown();
  setInterval(updateCountdown, 1000);
</script>
