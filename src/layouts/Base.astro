---

import Navigation from "../components/Navigation.astro";

const {
  title = "TECS — Technologists • Engineers • Creators • Scientists",
  description = "TECS is a nationwide competition for Irish secondary school students.",
  pageTitle
} = Astro.props;
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{pageTitle ? `${pageTitle} — TECS` : title}</title>
    <meta name="description" content={description} />
    <meta property="og:title" content={pageTitle ? `${pageTitle} — TECS` : title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content="/images/john-collison-hero-image.jpg" />
    <link rel="icon" href="/favicon.svg" />
    <link href="/styles.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Progress Bar -->
    <div class="progress-bar" id="progress-bar"></div>



    <!-- Theme Toggle -->


    <a class="skip" href="#content">Skip to Content</a>

    <!-- Navigation -->
    <Navigation />

    <main id="content">
      <slot />
    </main>

    <footer class="footer">
      <div class="container">
        <div class="footer-grid">
          <div>
            <p>Technologists • Engineers • Creators • Scientists</p>
            <p style="margin-top:1rem;">Ireland's nationwide talent search for young innovators.</p>
          </div>
          <div style="margin-left: -5px;">
            <p><strong>Contact: </strong><a href="mailto:info@jointecs.org">info@jointecs.org</a></p>
            <p><strong>Organisers: </strong>ISE at UL • Patch Programme</p>
          </div>
        </div>
        <div class="copyright">© {new Date().getFullYear()} TECS • jointecs.org</div>
      </div>
    </footer>

    <!-- Scroll reveal animation and progress bar -->
    <script>
      // Progress bar functionality
      function updateProgressBar() {
        const progressBar = document.getElementById('progress-bar') as HTMLElement;
        if (!progressBar) return;

        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrollPercent = (scrollTop / scrollHeight) * 100;
        
        progressBar.style.width = scrollPercent + '%';
      }

      // Reveal cards on scroll
      const options = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' };
      const obs = new IntersectionObserver((entries) => entries.forEach(entry => {
        if (entry.isIntersecting) {
          const target = entry.target as HTMLElement;
          target.style.opacity = '1';
          target.style.transform = 'translateY(0)';
        }
      }), options);
      
      document.addEventListener('DOMContentLoaded', () => {
        // Initialize progress bar
        updateProgressBar();
        
        // Set up scroll listener for progress bar
        window.addEventListener('scroll', updateProgressBar);
        
        // Initialize card animations
        document.querySelectorAll('.card').forEach((card, i) => {
          const cardElement = card as HTMLElement;
          cardElement.style.opacity = '0';
          cardElement.style.transform = 'translateY(20px)';
          cardElement.style.transition = `opacity .5s ease ${i * 0.1}s, transform .5s ease ${i * 0.1}s`;
          obs.observe(card);
        });
      });
    </script>
  </body>
</html>
